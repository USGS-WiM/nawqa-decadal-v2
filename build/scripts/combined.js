function addCommas(e){e+="";for(var t=e.split("."),a=t[0],i=t.length>1?"."+t[1]:"",o=/(\d+)(\d{3})/;o.test(a);)a=a.replace(o,"$1,$2");return a+i}function camelize(e){return e.replace(/(?:^\w|[A-Z]|\b\w)/g,function(e,t){return 0==t?e.toLowerCase():e.toUpperCase()}).replace(/\s+/g,"")}function linkClick(){map.setCursor("wait"),console.log(sucode4FeatureLinkZoom);var e=new esri.tasks.Query;e.where="network_polygons.SUCODE = '"+sucode4FeatureLinkZoom+"'",e.returnGeometry=!0;var t=new esri.tasks.QueryTask(map.getLayer("networkBoundaries").url+"/0");t.execute(e,function(e){console.log("returned with result?");var t=e.features[0],a=t.geometry.getExtent();map.setExtent(a,!0),map.setCursor("default")})}function showTermExp(){$("#explanationModal").modal("show")}var allLayers,renderer,constituentDropURl="https://gis.wim.usgs.gov/arcgis/rest/services/NAWQA/decadal_test/MapServer/6/query?where=OBJECTID+%3E+0&text=&objectIds=&time=&geometry=&geometryType=esriGeometryEnvelope&inSR=&spatialRel=esriSpatialRelIntersects&relationParam=&outFields=*&returnGeometry=true&maxAllowableOffset=&geometryPrecision=&outSR=&returnIdsOnly=false&returnCountOnly=false&orderByFields=ConstituentType,DisplayName&groupByFieldsForStatistics=&outStatistics=&returnZ=false&returnM=false&gdbVersion=&returnDistinctValues=false&f=json";require(["esri/geometry/Extent","esri/layers/WMSLayerInfo","esri/layers/FeatureLayer","esri/layers/WebTiledLayer","esri/renderers/UniqueValueRenderer","esri/symbols/SimpleLineSymbol","esri/symbols/SimpleMarkerSymbol","dojo/domReady!"],function(e,t,a,i,o,n,r){var l=null;renderer=new esri.renderer.UniqueValueRenderer(l,"ChemData.C12_P00940_Chloride"),renderer2=new esri.renderer.UniqueValueRenderer(l),renderer3=new esri.renderer.UniqueValueRenderer(l,"ChemData.C12_P00940_Chloride"),orangeBigSymbol=new esri.symbol.PictureMarkerSymbol("https://nawqatrends.wim.usgs.gov/nawqaimages/orange_large.png",45,45),greenBigSymbol=new esri.symbol.PictureMarkerSymbol("https://nawqatrends.wim.usgs.gov/nawqaimages/green_large.png",45,45),noChangeSymbolSmall=new esri.symbol.PictureMarkerSymbol("images/nochange.png",12,12),noChangeSymbolLarge=new esri.symbol.PictureMarkerSymbol("https://nawqatrends.wim.usgs.gov/nawqaimages/no_change.png",75,40),orangeSmallSymbol=new esri.symbol.PictureMarkerSymbol("https://nawqatrends.wim.usgs.gov/nawqaimages/orange_small.png",45,25),greenSmallSymbol=new esri.symbol.PictureMarkerSymbol("https://nawqatrends.wim.usgs.gov/nawqaimages/green_small.png",45,25),blankSymbol=new esri.symbol.PictureMarkerSymbol("https://nawqatrends.wim.usgs.gov/nawqaimages/blank.png",45,25),allNetworksSymbol=new esri.symbol.PictureMarkerSymbol("images/allnetworks.png",14,14),renderer.addValue({value:"2",symbol:orangeBigSymbol,label:"Large increase"}),renderer.addValue({value:"1",symbol:orangeSmallSymbol,label:"Small increase"}),renderer.addValue({value:"0",symbol:noChangeSymbolSmall,label:"No significant change"}),renderer.addValue({value:"-1",symbol:greenSmallSymbol,label:"Small decrease"}),renderer.addValue({value:"-2",symbol:greenBigSymbol,label:"Large decrease"}),renderer2.addValue({value:"1",symbol:orangeSmallSymbol,label:"Increase"}),renderer2.addValue({value:"0",symbol:noChangeSymbolSmall,label:"No significant change"}),renderer2.addValue({value:"-1",symbol:greenSmallSymbol,label:"Decrease"}),renderer3.addValue({value:"2",symbol:allNetworksSymbol,label:"Network"}),renderer3.addValue({value:"0",symbol:allNetworksSymbol,label:"Network"}),renderer3.addValue({value:"2",symbol:allNetworksSymbol,label:"Network"}),renderer3.addValue({value:"-2",symbol:allNetworksSymbol,label:"Network"}),renderer3.addValue({value:"1",symbol:allNetworksSymbol,label:"Network"}),renderer3.addValue({value:"-1",symbol:allNetworksSymbol,label:"Network"}),allLayers=[{groupHeading:"sites",showGroupHeading:!1,includeInLayerList:!1,layers:{"All Networks":{url:"https://gis.wim.usgs.gov/arcgis/rest/services/NAWQA/decadal_test/MapServer/0",options:{id:"allNetworks",mode:a.MODE_SNAPSHOT,outFields:["*"],visible:!1},wimOptions:{type:"layer",layerType:"agisFeature",includeInLayerList:!0,hasOpacitySlider:!0,includeLegend:!0,renderer:renderer3}},"Network Boundaries":{url:"https://gis.wim.usgs.gov/arcgis/rest/services/NAWQA/networks/MapServer",visibleLayers:[0],options:{id:"networkBoundaries",opacity:.75,visible:!0},wimOptions:{type:"layer",layerType:"agisDynamic",includeInLayerList:!0,hasOpacitySlider:!0,includeLegend:!1}},"Magnitude of change":{url:"https://gis.wim.usgs.gov/arcgis/rest/services/NAWQA/decadal_test/MapServer/0",options:{id:"networkLocations",mode:a.MODE_SNAPSHOT,outFields:["*"],visible:!0},wimOptions:{type:"layer",layerType:"agisFeature",includeInLayerList:!0,hasOpacitySlider:!0,includeLegend:!0,renderer:renderer}},"Land use 2001":{url:"https://smallscale.nationalmap.gov/arcgis/rest/services/LandCover/MapServer",visibleLayers:[2],options:{id:"nlcd",opacity:.75,visible:!1},wimOptions:{type:"layer",layerType:"agisDynamic",includeInLayerList:!0,hasOpacitySlider:!0,includeLegend:!0}},"Trend sites":{url:"https://gis.wim.usgs.gov/arcgis/rest/services/NAWQA/trendSites_test/MapServer",options:{id:"trendSites",opacity:1,visible:!1},wimOptions:{type:"layer",layerType:"agisDynamic",includeInLayerList:!1,includeLegend:!1}},"Principal Aquifers":{url:"https://nwismapper.s3.amazonaws.com/pr_aq/${level}/${row}/${col}.png",options:{id:"principalAquifers",opacity:.5,visible:!1},wimOptions:{type:"layer",layerType:"webTiledLayer",includeInLayerList:!0,hasOpacitySlider:!0,includeLegend:!0,otherLayersToggled:["glacialAquifer"],moreinfo:"https://water.usgs.gov/ogw/aquifer/principal/aquifrp025.xml"}},"Glacial Aquifer":{url:"https://gis.wim.usgs.gov/arcgis/rest/services/NAWQA/decadal_test/MapServer",visibleLayers:[2],options:{id:"glacialAquifer",opacity:.4,visible:!1},wimOptions:{type:"layer",layerType:"agisDynamic",includeInLayerList:!1,includeLegend:!1}}}}]});var map,allLayers,maxLegendHeight,maxLegendDivHeight,printCount=0,dragInfoWindows=!0,defaultMapCenter=[-94.106,35.729],constObj,currentConstType="",currentSiteNo="",currentConst="Total Phosphorus",currentLayer="wrtdsSites",previousConst="Chloride",OID="",oldValue="",attFieldSpecial="",attFieldSpecialLower="",z=0,legend,orgSel,inorgSel,orgCycle3Sel,inorgCycle3Sel,sucode4FeatureLinkZoom,identifyTask,identifyParams,siteClicked=!1;require(["esri/arcgis/utils","esri/Color","esri/map","esri/dijit/HomeButton","esri/dijit/LocateButton","esri/layers/ArcGISImageServiceLayer","esri/layers/ArcGISTiledMapServiceLayer","esri/dijit/Geocoder","esri/dijit/PopupTemplate","esri/graphic","esri/geometry/Multipoint","esri/geometry/Point","esri/graphicsUtils","esri/symbols/PictureMarkerSymbol","esri/symbols/SimpleFillSymbol","esri/symbols/SimpleLineSymbol","esri/symbols/SimpleMarkerSymbol","esri/tasks/IdentifyTask","esri/tasks/IdentifyParameters","esri/tasks/LegendLayer","esri/tasks/PrintTask","esri/tasks/PrintParameters","esri/tasks/PrintTemplate","esri/tasks/query","esri/geometry/webMercatorUtils","dojo/dnd/Moveable","dojo/query","dojo/dom","dojo/dom-class","dojo/on","dojo/domReady!"],function(e,t,a,i,o,n,r,l,s,c,d,g,p,u,f,m,h,y,b,v,w,k,T,S,C,L,q,M,I,x){function O(){$("#printModal").modal("show")}function D(){var e="test";if($("#cycle12input").is(":checked"))var t="1988-2001 to 2002-2012";if($("#cycle13input").is(":checked"))var t="1988-2001 to 2013-2014";if($("#cycle23input").is(":checked"))var t="2002-2012 to 2013-2014";if($("#cycle123input").is(":checked"))var t="1988-2001 to 2002-2012 to 2013-2014";console.log(t);var a=$("input[name=constButtons]:checked").val(),i=$("#"+a+"ConstituentSelect")[0].value;return e="Decadal Change for "+i+" in Groundwater from "+t}function N(e){var t=map.getLayer(e).on("update-end",function(e){var a=e.target.graphics.length;0==a?($(".alert-box").show(),$("#siteInfoClose").click()):$(".alert-box").hide(),t.remove()});map.getLayer(e).refresh()}function P(){map.removeLayer(Y),map.removeLayer(Q),map.removeLayer(U)}function _(e){var t=e.currentTarget;"organicButton"==t.id?($("#organicConstituentSelect").show(),$("#inorganicConstituentSelect").hide(),$("#organicConstituentSelect").prependTo("#inputs"),$("#organicConstituentSelect").trigger("change")):"inorganicButton"==t.id&&($("#organicConstituentSelect").hide(),$("#inorganicConstituentSelect").show(),$("#inorganicConstituentSelect").prependTo("#inputs"),$("#inorganicConstituentSelect").trigger("change"))}function A(e){z+=1;var t=e.target,a="",i=t[t.selectedIndex].attributes.GenDescBenchmark.value.toString();1==t[t.selectedIndex].attributes.hasOwnProperty("gendescsmallchg")&&1==t[t.selectedIndex].attributes.hasOwnProperty("gendesclargechg")&&"null"!=i.match("No benchmark available")&&1==t[t.selectedIndex].attributes.hasOwnProperty("gendescbenchmark")&&(a="<p>"+t[t.selectedIndex].attributes.GenDescSmallChg.value.toString()+"</p><p>"+t[t.selectedIndex].attributes.GenDescLargeChg.value.toString()+"</p><p>"+t[t.selectedIndex].attributes.GenDescBenchmark.value.toString()+"</p>"),0==t[t.selectedIndex].attributes.hasOwnProperty("gendesclargechg")&&1==t[t.selectedIndex].attributes.hasOwnProperty("gendescsmallchg")&&1==t[t.selectedIndex].attributes.hasOwnProperty("gendescbenchmark")&&(a="<p>"+t[t.selectedIndex].attributes.GenDescSmallChg.value.toString()+"</p>"),"organicConstituentSelect"==t.id?$("#constitExp").html(a):"inorganicConstituentSelect"==t.id&&$("#constitExp").html(a);var o=map.getLayer("networkLocations"),n=dojo.connect(o,"onUpdateEnd",function(e){dojo.disconnect(o,n)}),r="",l=map.getLayer("networkLocations").fields,s=$("input[name=trendPeriod]:checked").val();$.each(l,function(e,a){-1!=l[e].name.toLowerCase().indexOf(t[t.selectedIndex].attributes.constituent.value.toLowerCase())&&-1!=l[e].name.toLowerCase().indexOf(s.toLowerCase())&&(r=l[e].name)}),renderer.attributeField=r,renderer2.attributeField=r,o.setDefinitionExpression(r+" IS NOT NULL"),o.refresh(),N(o.id),null!=i.match("No benchmark available")&&i.match("No benchmark available").length>0?o.setRenderer(renderer2):o.setRenderer(renderer),legend.refresh();var c=$("#siteInfoPanel").html(),c=c.replace(previousConst,e.target.value);$("#siteInfoPanel").html(c);var d=$("#networkInfoPanel").html(),d=d.replace(previousConst,e.target.value);$("#networkInfoPanel").html(d),previousConst=e.target.value,console.log("after: "+previousConst);var g=new esri.tasks.Query,o=map.getLayer("networkLocations");g.returnGeometry=!1,g.where="network_centroids.OBJECTID = "+OID,o.queryFeatures(g,function(e){if(e.features.length>0){for(var t=0;t<constObj.features.length;t++)if(constObj.features[t].attributes.DisplayName==previousConst){attFieldSpecial="ChemData."+$("input[name=trendPeriod]:checked").val()+constObj.features[t].attributes.Constituent;var a=constObj.features[t].attributes.Constituent.split("_");attFieldSpecialLower="ChemData."+$("input[name=trendPeriod]:checked").val()+a[0]+"_"+a[1].toLowerCase()}var i=B(e.features[0].attributes[attFieldSpecial]);""==i&&(i=B(e.features[0].attributes[attFieldSpecialLower])),console.log("val: "+i+", oldValue: "+oldValue);var o=$("#siteInfoPanel").html();o=o.replace(oldValue,i),o=o.replace(camelize(oldValue),camelize(i));var n=$("#networkInfoPanel").html();n=n.replace(oldValue,i),n=n.replace(camelize(oldValue),camelize(i)),$("#networInfoPanel").html(n),$("#siteInfoPanel").html(o),oldValue=i}else $("#siteInfoClose").click()})}function E(e){var t;return"URB"==e?t="Urban land use network":"SUS"==e?t="Major aquifer study":"AG"==e&&(t="Agricultural land use network"),t}function R(e){var t,a=e.toString().split(".");return t=(null!=a[1]||void 0!=a[1])&&a[1].length>2?e.toFixed(2):e}function G(e,t,a,i,o){return new u({angle:0,xoffset:t,yoffset:a,type:"esriPMS",url:e,contentType:"image/png",width:i,height:o})}function B(e){var t="";if(void 0!==e)switch(e=e.toString()){case"-2":t="large decrease";break;case"-1":t="small decrease";break;case"0":t="no change";break;case"1":t="small increase";break;case"2":t="large increase"}return t}function F(){function e(e){printCount++;var t=$("<p><label>"+printCount+': </label>&nbsp;&nbsp;<a href="'+e.url+'" target="_blank">'+n+" </a></p>");$("#printJobsDiv").find("p.toRemove").remove(),$("#printModalBody").append(t),$("#printTitle").val(""),$("#printExecuteButton").button("reset")}function t(e){alert("Sorry, an unclear print error occurred. Please try refreshing the application to fix the problem")}var a=new k;a.map=map;var i=new T;i.exportOptions={width:500,height:400,dpi:300},i.format="PDF",i.layout="Letter ANSI A Landscape 2 fixed legend",i.preserveScale=!1;var o=D();i.layoutOptions={titleText:o,authorText:"NAWQA",copyrightText:"This page was produced by the nawqa decadal trends mapper"};var n=i.layoutOptions.titleText;a.template=i;var r=new w("https://gis.wim.usgs.gov/arcgis/rest/services/Utilities/PrintingTools/GPServer/Export%20Web%20Map%20Task");r.execute(a,e,t)}if(!jQuery.support.cors&&window.XDomainRequest){var j=/^https?:\/\//i,V=/^get|post$/i,W=new RegExp("^"+location.protocol,"i"),H=/\/xml/i;jQuery.ajaxTransport("text html xml json",function(e,t,a){if(e.crossDomain&&e.async&&V.test(e.type)&&j.test(t.url)&&W.test(t.url)){var i=null,o=(t.dataType||"").toLowerCase();return{send:function(a,n){i=new XDomainRequest,/^\d+$/.test(t.timeout)&&(i.timeout=t.timeout),i.ontimeout=function(){n(500,"timeout")},i.onload=function(){var e="Content-Length: "+i.responseText.length+"\r\nContent-Type: "+i.contentType,t={code:200,message:"success"},a={text:i.responseText};try{if("json"===o)try{a.json=JSON.parse(i.responseText)}catch(r){t.code=500,t.message="parseerror"}else if("xml"===o||"text"!==o&&H.test(i.contentType)){var l=new ActiveXObject("Microsoft.XMLDOM");l.async=!0;try{l.loadXML(i.responseText)}catch(r){l=void 0}if(!l||!l.documentElement||l.getElementsByTagName("parsererror").length)throw t.code=500,t.message="parseerror","Invalid XML: "+i.responseText;a.xml=l}}catch(s){throw s}finally{n(t.code,t.message,a,e)}},i.onerror=function(){n(500,"error",{text:i.responseText})},i.open(e.type,e.url),i.send()},abort:function(){i&&i.abort()}}}})}jQuery.support.cors=!0,$.ajax({dataType:"json",type:"GET",url:constituentDropURl,headers:{Accept:"*/*"},success:function(e){constObj=e,$.each(e.features,function(e,t){null!=t.attributes.Constituent&&("inorganic"==t.attributes.ConstituentType&&"Mappable"==t.attributes.Tableorder?($("#inorganicConstituentSelect").append($("<option></option>").attr(t.attributes).text(t.attributes.DisplayName)),1==t.attributes.HasCycle3&&$("#inorganicConstituentCycle3Select").append($("<option></option>").attr(t.attributes).text(t.attributes.DisplayName)),"Chloride"==t.attributes.DisplayName&&$("#constitExp").html("<p>"+t.attributes.GenDescSmallChg+"</p><p>"+t.attributes.GenDescLargeChg+"</p><p>"+t.attributes.GenDescBenchmark+"</p>")):"organic"==t.attributes.ConstituentType&&"Mappable"==t.attributes.Tableorder&&($("#organicConstituentSelect").append($("<option></option>").attr(t.attributes).text(t.attributes.DisplayName)),1==t.attributes.HasCycle3&&$("#organicConstituentCycle3Select").append($("<option></option>").attr(t.attributes).text(t.attributes.DisplayName))))}),orgSel=$("#organicConstituentSelect"),inorgSel=$("#inorganicConstituentSelect"),orgCycle3Sel=$("#organicConstituentCycle3Select"),inorgCycle3Sel=$("#inorganicConstituentCycle3Select"),inorgSel.val("Chloride"),orgSel.hide(),orgCycle3Sel.hide(),inorgCycle3Sel.hide()},error:function(e){console.log("Error processing the JSON. The error is:"+e)}});var U=new r("https://server.arcgisonline.com/arcgis/rest/services/World_Shaded_Relief/MapServer"),Q=new r("https://server.arcgisonline.com/ArcGIS/rest/services/Reference/World_Boundaries_and_Places_Alternate/MapServer"),Y=new r("https://basemap.nationalmap.gov/arcgis/rest/services/USGSTopo/MapServer");map=a("mapDiv",{basemap:"topo",center:defaultMapCenter,zoom:5}),map.addLayer(Q,1),map.addLayer(U,1),map.removeLayer(Y);var X=new i({map:map},"homeButton");X.startup();var Z=new o({map:map},"locateButton");Z.startup(),$("#legendButton").click(),$(window).resize(function(){}),$("#IEwarnContinue").click(function(){$("#aboutModal").modal({backdrop:"static"}),$("#aboutModal").modal("show")}),-1!==navigator.userAgent.indexOf("MSIE")||navigator.appVersion.indexOf("Trident/")>0?$("#IEwarningModal").modal("show"):($("#aboutModal").modal({backdrop:"static"}),$("#aboutModal").modal("show")),$("#printExecuteButton").click(function(e){e.preventDefault(),$(this).button("loading"),F()}),map.on("extent-change",function(e){}),$("#printNavButton").click(function(){var e=D();$("#printTitle").text(e),O()});$(".trendPeriod").on("change",function(e){var t=(e.currentTarget,$("#typeSelect").val(),$("input[name=constButtons]:checked").val());$("#"+t+"ConstituentSelect").trigger("change")}),x(map,"load",function(){var e=map.getScale().toFixed(0);$("#scale")[0].innerHTML=addCommas(e);var t=C.webMercatorToGeographic(map.extent.getCenter());if($("#latitude").html(t.y.toFixed(3)),$("#longitude").html(t.x.toFixed(3)),$("#networkExpl").html("<h5 style='margin-left:-10px;font-weight:bold;'>&nbsp Network Boundaries<h5><p class='legendSpacing'><div class='squareDiv ag'></div>&nbsp; Agricultural land use network</p><p class='legendSpacing'><div class='squareDiv res'></div>&nbsp Urban land use network</p><p class='legendSpacing'><div class='squareDiv other'></div>&nbsp Domestic supply well network</p>"),1==dragInfoWindows){var a=q(".title",map.infoWindow.domNode)[0],i=new L(map.infoWindow.domNode,{handle:a});x(i,"FirstMove",function(){var e=q(".outerPointer",map.infoWindow.domNode)[0];I.add(e,"hidden");var e=q(".pointer",map.infoWindow.domNode)[0];I.add(e,"hidden")}.bind(this))}}),x(map,"zoom-end",function(){var e=map.getScale().toFixed(0);$("#scale")[0].innerHTML=addCommas(e)}),x(map,"mouse-move",function(e){if($("#mapCenterLabel").css("display","none"),null!=e.mapPoint){var t=C.webMercatorToGeographic(e.mapPoint);$("#latitude").html(t.y.toFixed(3)),$("#longitude").html(t.x.toFixed(3))}}),x(map,"pan-end",function(){$("#mapCenterLabel").css("display","inline");var e=C.webMercatorToGeographic(map.extent.getCenter());$("#latitude").html(e.y.toFixed(3)),$("#longitude").html(e.x.toFixed(3))}),x(M.byId("btnStreets"),"click",function(){map.setBasemap("streets"),P()}),x(M.byId("btnSatellite"),"click",function(){map.setBasemap("satellite"),P()}),x(M.byId("btnHybrid"),"click",function(){map.setBasemap("hybrid"),P()}),x(M.byId("btnShadedRelief"),"click",function(){map.addLayer(Q,1),map.addLayer(U,1),map.removeLayer(Y)}),x(M.byId("btnTerrain"),"click",function(){map.setBasemap("terrain"),P()}),x(M.byId("btnDarkGray"),"click",function(){map.setBasemap("dark-gray"),P()}),x(M.byId("btnGray"),"click",function(){map.setBasemap("gray"),P()}),x(M.byId("btnNatGeo"),"click",function(){map.setBasemap("national-geographic"),P()}),x(M.byId("btnOSM"),"click",function(){map.setBasemap("osm"),P()}),x(M.byId("btnTopo"),"click",function(){map.setBasemap("topo"),P()}),x(M.byId("btnNatlMap"),"click",function(){map.addLayer(Y,1),map.removeLayer(Q),map.removeLayer(U)}),x(map,"click",function(e){}),$("#siteInfoDiv").lobiPanel({unpin:!1,reload:!1,minimize:!1,close:!1,expand:!1,editTitle:!1,width:400,maxWidth:800,maxHeight:500}),$("#siteInfoDiv .dropdown").prepend("<div id='siteInfoClose' title='close'><b>X</b></div>"),$("#siteInfoDiv .dropdown").prepend("<div id='siteInfoMin' title='collapse'><b>_</b></div>"),$("#siteInfoMin").click(function(){$("#siteInfoDiv").css("visibility","hidden")}),$("#siteInfoClose").click(function(){$("#siteInfoDiv").css("visibility","hidden"),map.graphics.clear(),map.getLayer("trendSites").setVisibility(!1)}),$("#networkInfoDiv").lobiPanel({unpin:!1,reload:!1,minimize:!1,close:!1,expand:!1,editTitle:!1,width:400,maxWidth:800,maxHeight:390}),$("#networkInfoDiv .dropdown").prepend("<div id='networkInfoClose' title='close'><b>X</b></div>"),$("#networkInfoDiv .dropdown").prepend("<div id='siteInfoMin' title='collapse'><b>_</b></div>"),$("#siteInfoMin").click(function(){$("#networkInfoDiv").css("visibility","hidden")}),$("#networkInfoClose").click(function(){$("#networkInfoDiv").css("visibility","hidden"),map.graphics.clear()}),$("#glacialInfoDiv").lobiPanel({unpin:!1,reload:!1,minimize:!1,close:!1,expand:!1,editTitle:!1,width:200,maxWidth:400,maxHeight:200}),$("#glacialInfoDiv .dropdown").prepend("<div id='glacialInfoClose' title='close'><b>X</b></div>"),$("#glacialInfoDiv .dropdown").prepend("<div id='siteInfoMin' title='collapse'><b>_</b></div>"),$("#siteInfoMin").click(function(){$("#glacialInfoDiv").css("visibility","hidden")}),$("#glacialInfoClose").click(function(){$("#glacialInfoDiv").css("visibility","hidden"),map.graphics.clear()});x(M.byId("inorganicButton"),"change",_),x(M.byId("organicButton"),"change",_),$(".constSelect").on("change",A),siteClicked=!1,map.on("layer-add",function(e){var a=e.layer.id;e.layer;"networkLocations"==a&&map.getLayer(a).on("click",function(e){siteClicked=!0;var i;map.graphics.clear();var o=new h;o.setStyle(h.STYLE_SQUARE),o.setColor(new t([0,0,0,0])),o.setSize("20");var n=new m(m.STYLE_SOLID,new t([0,255,255]),2);o.setOutline(n);var r=(new g(e.mapPoint.x,e.mapPoint.y,map.spatialReference),new c(e.graphic.geometry,o));map.graphics.add(r),$("#siteInfoDiv").css("visibility","visible");var l=$("#siteInfoDiv").data("lobiPanel"),s=$(document).height(),d=$(document).width(),p=.9,u=s*p,f=d*p;500>s&&$("#siteInfoDiv").height(u),500>d&&$("#siteInfoDiv").width(f);var y=e.x,b=e.y;l.setPosition(y,b),1==l.isPinned()&&l.unpin();var v=e.graphic.attributes;$("#siteInfoPanel").empty(),currentLayer=a;var w=e.graphic,v=w.attributes;dojo.byId("organicButton").checked?i=dojo.byId("organicConstituentSelect"):dojo.byId("inorganicButton").checked&&(i=dojo.byId("inorganicConstituentSelect"));var k=map.getLayer("trendSites");k.setVisibility(!0);var T=[];T[0]="SuCode = '"+v["network_centroids.SUCode"]+"'",k.setLayerDefinitions(T),k.refresh();var S,C=(i[i.selectedIndex].attributes.constituent.value,i[i.selectedIndex].attributes.displayname.value),L=map.getLayer("networkLocations").fields,q=$("input[name=trendPeriod]:checked").val();$.each(L,function(e,t){-1!=L[e].name.toLowerCase().indexOf(i[i.selectedIndex].attributes.constituent.value.toLowerCase())&&-1!=L[e].name.toLowerCase().indexOf(q.toLowerCase())&&(S=L[e].name)});var M=v["tbl_Networks.Depth25thpercentile"],I=v["tbl_Networks.Depth75thpercentile"];if(sucode4FeatureLinkZoom=v["network_centroids.SUCode"],"networkLocations"==a){currentSiteNo=v.EcoTrendResults_EcoSiteID;var x,O,D;""!=v["tbl_Networks.Cycle1_SampleFY"]?(x=v["tbl_Networks.Cycle1_SampleFY"],null==v["tbl_Networks.Cycle1_SampleFY"]&&(x="NA")):x="NA",""!=v["tbl_Networks.Cycle2_SampleFY"]?(O=v["tbl_Networks.Cycle2_SampleFY"],null==v["tbl_Networks.Cycle2_SampleFY"]&&(O="NA")):O="NA",""!=v["tbl_Networks.Cycle3_SampleFY"]&&v["tbl_Networks.Cycle3_SampleFY"]<2017?(D=v["tbl_Networks.Cycle3_SampleFY"],null==v["tbl_Networks.Cycle3_SampleFY"]&&(D="NA")):D="NA",$("#siteInfoDiv").show(),$("#networkInfoDiv").hide(),$("#glacialInfoDiv").hide(),$("#siteInfoPanel").append("<table class='infoTable'><tr><td><b>"+C+"</b></td><td><span class='"+camelize(B(v[S]))+"'>"+B(v[S])+"</span></td></tr><tr><td><div class='tableSpacer'></div></td><td></td></tr><tr><td><b>Network type</b></td><td>"+E(v["network_centroids.NETWORK_TYPE"])+"</td></tr><tr><td><b>Types of wells</b></td><td>"+v["tbl_Networks.WellTypeDesc"]+"</td></tr><tr><td><b>Typical depth range</b></td><td>"+R(M)+" to "+R(I)+" feet</td></tr><tr><td><div class='tableSpacer'></div></td><td></td></tr><tr><td><b>Principal aquifer</b></td><td>"+v["tbl_Networks.PrincipleAquifer"]+"</td></tr><tr><td><b>Regional aquifer</b></td><td>"+v["tbl_Networks.RegionalAquifer"]+"</td></tr><tr><td><b>Aquifer material</b></td><td>"+v["tbl_Networks.AquiferMaterial"]+"</td></tr><tr><td><div class='tableSpacer'></div></td><td></td></tr><tr><td><b>Additional information</b></td><td>"+v["tbl_Networks.AdditionalInfo"]+"</td></tr><tr><td><b>NAWQA network code</b></td><td>"+v["tbl_Networks.SUCode"]+"</td></tr><tr><td><b>Sample dates</b></td><td>"+x+", "+O+", "+D+"</td></tr><tr><td><div class='tableSpacer'></div></td><td></td></tr><tr><td colspan='2' align='center'><b><a id='infoWindowLink' href='javascript:linkClick()'>ZOOM TO NETWORK</a></b></td></tr><tr><td colspan='2' align='center'><a id='explanation' href='javascript:showTermExp()'>For explanation of table entries click here</a></td></tr><tr><td colspan='2' align='center'><div id='circle'></div><b> = Well</b></td></tr></table>")}OID=w.attributes["network_centroids.OBJECTID"],oldValue=B(v[S]),$("#infoWindowLink").on("click",linkClick),$("#explanation").on("click",showTermExp)})}),identifyParams=new esri.tasks.IdentifyParameters,identifyParams.tolerance=0,identifyParams.returnGeometry=!0,identifyParams.maxAllowableOffset=1e3,identifyParams.layerOption="LAYER_OPTION_ALL",identifyParams.width=map.width,identifyParams.height=map.height,identifyTask=new esri.tasks.IdentifyTask(allLayers[0].layers["Network Boundaries"].url),x(map,"click",function(e){if($(".network-alert-box").hide(),0==siteClicked){map.graphics.clear(),$("#siteInfoDiv").hide(),$("#networkInfoDiv").show(),$("#glacialInfoDiv").hide(),map.getLayer("trendSites").setVisibility(!1),identifyParams.geometry=e.mapPoint,identifyParams.mapExtent=map.extent;var t=identifyTask.execute(identifyParams);t.addCallback(function(t){function a(e){var t,a;return(null!=e||void 0!=e)&&e.length>2?(a=a.toString().split("."),t=e.toFixed(2)):t=e,t}if(t.length>0&&map.getLayer("networkBoundaries").visible){var i=t[0].feature,o=(t[0].feature,i.attributes),n=map.getLayer("networkLocations"),r=o.SUCODE,l=new esri.symbol.SimpleFillSymbol(esri.symbol.SimpleFillSymbol.STYLE_SOLID,new esri.symbol.SimpleLineSymbol(esri.symbol.SimpleLineSymbol.STYLE_SOLID,new dojo.Color([98,194,204]),2),new dojo.Color([98,194,204,.5]));i.geometry.spatialReference=map.spatialReference;var s=i;s.setSymbol(l),map.graphics.add(s),$("#networkInfoPanel").empty();var c=new esri.tasks.Query;c.returnGeometry=!0,c.outFields=["*"],c.where="network_centroids.SUCode = '"+r+"'",n.queryFeatures(c,function(t){function i(){$(".network-alert-box").hide(),map.graphics.clear()}try{var o=t.features[0].attributes;t.features.length;sucode4FeatureLinkZoom=o["network_centroids.SUCode"];var n=o["tbl_Networks.Depth25thpercentile"],r=o["tbl_Networks.Depth75thpercentile"];$("#networkInfoDiv").css("visibility","visible");var l=$("#networkInfoDiv").data("lobiPanel"),s=$(document).height(),c=$(document).width(),d=.9,g=s*d,p=c*d;500>s&&$("#networkInfoDiv").height(g),500>c&&$("#networkInfoDiv").width(p);var u=e.x,f=e.y;l.setPosition(u,f),1==l.isPinned()&&l.unpin(),$("#networkInfoPanel").append("<table class='infoTable'><tr><td><b></b></td><td><span class=''></span></td></tr><table class='infoTable'><tr><td><b>Network type</b></td><td>"+E(o["network_centroids.NETWORK_TYPE"])+"</td></tr><tr><td><b>Types of wells</b></td><td>"+o["tbl_Networks.WellTypeDesc"]+"</td></tr><tr><td><b>Typical depth range</b></td><td>"+a(n)+" to "+a(r)+" feet</td></tr><tr><td><div class='tableSpacer'></div></td><td></td></tr><tr><td><b>Principal aquifer</b></td><td>"+o["tbl_Networks.PrincipleAquifer"]+"</td></tr><tr><td><b>Regional aquifer</b></td><td>"+o["tbl_Networks.RegionalAquifer"]+"</td></tr><tr><td><b>Aquifer material</b></td><td>"+o["tbl_Networks.AquiferMaterial"]+"</td></tr><tr><td><div class='tableSpacer'></div></td><td></td></tr><tr><td><b>Additional information</b></td><td>"+o["tbl_Networks.AdditionalInfo"]+"</td></tr><tr><td><b>NAWQA network code</b></td><td>"+o["tbl_Networks.SUCode"]+"</td></tr><tr><td><div class='tableSpacer'></div></td><td></td></tr><tr><td colspan='2' align='center'><b><a id='infoWindowLink' href='javascript:linkClick()'>ZOOM TO NETWORK</a></b></td></tr><tr><td colspan='2' align='center'><a href='javascript:showTermExp()'>For explanation of table entries click here</a></td></tr></table>"),$("#infoWindowLink").on("click",linkClick),$("#explanation").on("click",showTermExp)}catch(m){$(".network-alert-box").show(),setTimeout(i,4e3)}},function(e){alert("error")})}else{if(map.getLayer("principalAquifers").visible){var d=new esri.tasks.Query;d.returnGeometry=!1,d.geometry=e.mapPoint;var g=new esri.tasks.QueryTask(map.getLayer("glacialAquifer").url+"/2");$("#glacialInfoPanel").empty(),g.execute(d,function(t){var a="";t.features.length>0&&$("#glacialInfoPanel").append("<p><b>Aquifer: </b>Glacial Aquifer</p>"),$("#glacialInfoDiv").css("visibility","visible");var i=$("#glacialInfoDiv").data("lobiPanel"),o=$(document).height(),n=$(document).width(),r=.9,l=o*r,s=n*r;500>o&&$("#glacialInfoDiv").height(l),500>n&&$("#glacialInfoDiv").width(s);var c=e.x,d=e.y;i.setPosition(c,d),1==i.isPinned()&&i.unpin();var g=new esri.tasks.IdentifyParameters;g.tolerance=0,g.returnGeometry=!0,g.mapExtent=map.extent,g.layerIds=[1],g.width=map.width,g.height=map.height,g.geometry=e.mapPoint;var p=new esri.tasks.IdentifyTask("https://gis.wim.usgs.gov/arcgis/rest/services/NAWQA/DecadalMap/MapServer");if(map.getLayer("principalAquifers").visible){var u=p.execute(identifyParams);u.addCallback(function(e){if(e.length>0){var t=e[0].feature,i=t.attributes;console.log(i.AQ_NAME);for(var o=[],n=0;n<e.length;n++){var t=e[n].feature,i=t.attributes;-1==o.indexOf(i.AQ_NAME)&&(o.push(i.AQ_NAME),$("#glacialInfoPanel").append("<p><b>Aquifer: </b>"+i.AQ_NAME+"</p>"))}new esri.InfoTemplate("Principal Aquifers",a);map.setCursor("default")}})}else map.setCursor("default")}),map.setCursor("default")}$("#glacialInfoDiv").show(),$("#siteInfoDiv").hide(),$("#networkInfoDiv").hide()}})}siteClicked=!1}),search_api.create("geosearch",{on_result:function(e){require(["esri/geometry/Extent"],function(t){var a=["GNIS_MAJOR","GNIS_MINOR","ZIPCODE","AREACODE"],i=a.indexOf(e.result.properties.Source);$("#geosearchModal").modal("hide"),-1==i?map.setExtent(new esri.geometry.Extent({xmin:e.result.properties.LonMin,ymin:e.result.properties.LatMin,xmax:e.result.properties.LonMax,ymax:e.result.properties.LatMax,spatialReference:{wkid:4326}}),!0):require(["esri/geometry/Point"],function(t){map.centerAndZoom(new t(e.result.properties.Lon,e.result.properties.Lat),12)})})},include_state:!0,include_zip_code:!0});G("../images/purple-pin.png",0,12,13,24);map.on("load",function(){map.infoWindow.set("highlight",!1),map.infoWindow.set("titleInBody",!1)}),$(document).ready(function(){function e(){$("#geosearchModal").modal("show")}function t(){$("#aboutModal").modal("show")}$("#geosearchNav").click(function(){e()}),$("#mcl").click(function(){$("#geosearchModal").modal("hide"),$("#aboutModal").modal("hide"),$("#faqModal").modal("hide"),$("#userGuideModal").modal("hide"),$("#dataModal").modal("hide"),$("#mclModal").modal("show")}),$("#mclOnTop").click(function(){$("#mclModal").modal("show")}),$("#mclOnTopTechPane").click(function(){$("#mclModal").modal("show")}),$("#mclOnTopFAQ8").click(function(){$("#mclModal").modal("show")}),$("#aboutNav").click(function(){t(),$("#aboutTab").trigger("click")}),$(".showUserGuide").click(function(){$("#searchTab").trigger("click"),$("#geosearchModal").modal("hide"),$("#aboutModal").modal("hide"),$("#faqModal").modal("hide"),$("#userGuideModal").modal("show")}),$(".showUserGuide2").click(function(){$("#geosearchModal").modal("hide"),$("#aboutModal").modal("hide"),$("#faqModal").modal("hide"),$("#userGuideModal").modal("show"),$("#iconTab").trigger("click"),console.log("Opening tab 2 user guide")}),$(".mcl2").click(function(){$("#geosearchModal").modal("hide"),$("#aboutModal").modal("hide"),$("#faqModal").modal("hide"),$("#dataModal").modal("hide"),$("#mclModal").modal("show"),console.log("Opening tab 2 user guide")}),$(".showUserGuide3").click(function(){$("#geosearchModal").modal("hide"),$("#aboutModal").modal("hide"),$("#faqModal").modal("hide"),$("#userGuideModal").modal("show"),console.log("Opening tab 3 user guide"),$("#layersTab").trigger("click")}),$(".showUserGuideExplanation").click(function(){$("#userGuideModal").modal("show"),$("#iconTab").trigger("click")}),
$(".showUserGuideSearch").click(function(){$("#userGuideModal").modal("show"),$("#searchTab").trigger("click")}),$(".showUserGuideMapSelection").click(function(){$("#userGuideModal").modal("show"),$("#layersTab").trigger("click")}),$("#userGuideNav").click(function(){$("#userGuideModal").modal("show"),$("#searchTab").trigger("click")}),$("#dataNav").click(function(){$("#dataModal").modal("show")}),$(".showStatisticAnalysis").click(function(){$("#geosearchModal").modal("hide"),$("#aboutModal").modal("hide"),$("#faqModal").modal("hide"),$("#dataModal").modal("show"),$("#techTab").trigger("click")}),$(".showTechInfo").click(function(){$("#dataModal").modal("show"),$("#techTab").trigger("click")}),$(".showReferencesCitedHelsel").click(function(){$("#dataModal").modal("show"),$("#citeTab").trigger("click"),setTimeout(function(){$("#helsel").toggleClass("highlighted")},1e3),setTimeout(function(){$("#helsel").toggleClass("highlighted")},4e3),setTimeout(function(){$("#dataModal").animate({scrollTop:$("#helsel").offset().top-80},500)},800)}),$(".showReferencesCitedMaupin").click(function(){$("#dataModal").modal("show"),$("#citeTab").trigger("click"),setTimeout(function(){$("#maupin").toggleClass("highlighted")},1e3),setTimeout(function(){$("#maupin").toggleClass("highlighted")},4e3),setTimeout(function(){$("#dataModal").animate({scrollTop:$("#maupin").offset().top-80},500)},800)}),$(".showReferencesCitedLapham").click(function(){$("#dataModal").modal("show"),$("#citeTab").trigger("click"),setTimeout(function(){$("#lapham").toggleClass("highlighted")},1e3),setTimeout(function(){$("#lapham").toggleClass("highlighted")},4e3),setTimeout(function(){$("#dataModal").animate({scrollTop:$("#lapham").offset().top-80},500)},800)}),$(".showReferencedCitesToccalino2010").click(function(){$("#dataModal").modal("show"),$("#citeTab").trigger("click"),setTimeout(function(){$("#toccalino2010").toggleClass("highlighted")},1e3),setTimeout(function(){$("#toccalino2010").toggleClass("highlighted")},4e3),setTimeout(function(){$("#dataModal").animate({scrollTop:$("#toccalino2010").offset().top-80},500)},800)}),$(".showReferencedCitesToccalino2014a").click(function(){$("#dataModal").modal("show"),$("#citeTab").trigger("click"),setTimeout(function(){$("#toccalino2014a").toggleClass("highlighted")},1e3),setTimeout(function(){$("#toccalino2014a").toggleClass("highlighted")},4e3),setTimeout(function(){$("#dataModal").animate({scrollTop:$("#toccalino2014a").offset().top-80},500)},800)}),$(".showReferencedCitesToccalino2014b").click(function(){$("#dataModal").modal("show"),$("#citeTab").trigger("click"),setTimeout(function(){$("#toccalino2014b").toggleClass("highlighted")},1e3),setTimeout(function(){$("#toccalino2014b").toggleClass("highlighted")},4e3),setTimeout(function(){$("#dataModal").animate({scrollTop:$("#toccalino2014b").offset().top-80},500)},800)}),$(".showReferencedCitesZogorski").click(function(){$("#dataModal").modal("show"),$("#citeTab").trigger("click"),setTimeout(function(){$("#zogorski").toggleClass("highlighted")},1e3),setTimeout(function(){$("#zogorski").toggleClass("highlighted")},4e3),setTimeout(function(){$("#dataModal").animate({scrollTop:$("#zogorski").offset().top-80},500)},800)}),$(".showReferencedCitesGilliom").click(function(){$("#dataModal").modal("show"),$("#citeTab").trigger("click"),setTimeout(function(){$("#gilliom").toggleClass("highlighted")},1e3),setTimeout(function(){$("#gilliom").toggleClass("highlighted")},4e3),setTimeout(function(){$("#dataModal").animate({scrollTop:$("#gilliom").offset().top-80},500)},800)}),$(".showReferencedCitesDesimone2009").click(function(){$("#dataModal").modal("show"),$("#citeTab").trigger("click"),setTimeout(function(){$("#desimone2009").toggleClass("highlighted")},1e3),setTimeout(function(){$("#desimone2009").toggleClass("highlighted")},4e3),setTimeout(function(){$("#dataModal").animate({scrollTop:$("#desimone2009").offset().top-80},500)},800)}),$(".showReferencesCitedRosen").click(function(){$("#dataModal").modal("show"),$("#citeTab").trigger("click"),setTimeout(function(){$("#rosen").toggleClass("highlighted")},1e3),setTimeout(function(){$("#rosen").toggleClass("highlighted")},4e3),setTimeout(function(){$("#dataModal").animate({scrollTop:$("#rosen").offset().top-80},500)},800)}),$(".showReferencesCitedPratt").click(function(){$("#dataModal").modal("show"),$("#citeTab").trigger("click"),setTimeout(function(){$("#pratt").toggleClass("highlighted")},1e3),setTimeout(function(){$("#pratt").toggleClass("highlighted")},4e3),setTimeout(function(){$("#dataModal").animate({scrollTop:$("#pratt").offset().top-80},500)},800)}),$(".showReferencesCitedLindsey").click(function(){$("#dataModal").modal("show"),$("#citeTab").trigger("click"),setTimeout(function(){$("#lindsey").toggleClass("highlighted")},1e3),setTimeout(function(){$("#lindsey").toggleClass("highlighted")},4e3),setTimeout(function(){$("#dataModal").animate({scrollTop:$("#lindsey").offset().top-80},500)},800)}),$(".showReferencedCitesEPA").click(function(){$("#dataModal").modal("show"),$("#citeTab").trigger("click"),setTimeout(function(){$("#epa2012").toggleClass("highlighted")},1e3),setTimeout(function(){$("#epa2012").toggleClass("highlighted")},4e3),setTimeout(function(){$("#dataModal").animate({scrollTop:$("#epa2012").offset().top-80},500)},800)}),$(".showLearnMore").click(function(){$("#geosearchModal").modal("hide"),$("#faqModal").modal("hide"),$("#userGuideModal").modal("hide"),$("#dataModal").modal("hide"),$("#aboutModal").modal("show"),$("#learnMoreTab").trigger("click")}),$("#swLink").click(function(){$("#geosearchModal").modal("hide"),$("#faqModal").modal("hide"),$("#userGuideModal").modal("hide"),$("#dataModal").modal("hide"),$("#aboutModal").modal("show"),$("#waterResourcesTab").trigger("click")}),$("#trendResultHelp").click(function(){$("#trendResultsHelpBox").slideToggle(200)}),$("#faqNav").click(function(){$("#faqModal").modal("show")}),$("#showFAQ15").click(function(){$("#geosearchModal").modal("hide"),$("#aboutModal").modal("hide"),$("#userGuideModal").modal("hide"),$("#dataModal").modal("hide"),$("#faqModal").modal("show"),$("#faq15header").trigger("click"),statsSection,$(document).ready(function(){setTimeout(function(){$("#faqModal").animate({scrollTop:$("#faq15header").offset().top-80},500)},800)})}),$("#showFAQ7").click(function(){$("#geosearchModal").modal("hide"),$("#aboutModal").modal("hide"),$("#userGuideModal").modal("hide"),$("#dataModal").modal("hide"),$("#faqModal").modal("show"),$("#faq7header").trigger("click"),$(document).ready(function(){"none"==$("#angle7").css("transform")?($("#angle7").css("transform","rotate(90deg)"),setTimeout(function(){$("#faqModal").animate({scrollTop:$("#faq7header").offset().top-80},500)},800)):setTimeout(function(){$("#faqModal").animate({scrollTop:$("#faq7header").offset().top-80},500)},800)})}),$("#html").niceScroll(),$("#sidebar").niceScroll(),$("#sidebar").scroll(function(){$("#sidebar").getNiceScroll().resize()}),$("#legendDiv").niceScroll(),maxLegendHeight=.9*$("#mapDiv").height(),$("#legendElement").css("max-height",maxLegendHeight),$("#legendCollapse").on("shown.bs.collapse",function(){maxLegendHeight=.9*$("#mapDiv").height(),$("#legendElement").css("max-height",maxLegendHeight),maxLegendDivHeight=$("#legendElement").height()-parseInt($("#legendHeading").css("height").replace("px","")),$("#legendDiv").css("max-height",maxLegendDivHeight)}),$("#legendCollapse").on("hide.bs.collapse",function(){$("#legendElement").css("height","initial")}),$("#faq1header").click(function(){$("#faq1body").slideToggle(250)}),$("#faq2header").click(function(){$("#faq2body").slideToggle(250)}),$("#faq3header").click(function(){$("#faq3body").slideToggle(250)}),$("#faq4header").click(function(){$("#faq4body").slideToggle(250)}),$("#faq5header").click(function(){$("#faq5body").slideToggle(250)}),$("#faq6header").click(function(){$("#faq6body").slideToggle(250)}),$("#faq7header").click(function(){$("#faq7body").slideToggle(250)}),$("#faq8header").click(function(){$("#faq8body").slideToggle(250)}),$("#faq9header").click(function(){$("#faq9body").slideToggle(250)}),$("#faq10header").click(function(){$("#faq10body").slideToggle(250)}),$("#faq11header").click(function(){$("#faq11body").slideToggle(250)}),$("#faq12header").click(function(){$("#faq12body").slideToggle(250)}),$("#faq13header").click(function(){$("#faq13body").slideToggle(250)}),$("#faq14header").click(function(){$("#faq14body").slideToggle(250)}),$("#faq15header").click(function(){$("#faq15body").slideToggle(250)}),$("#faq16header").click(function(){$("#faq16body").slideToggle(250)}),$("#faq17header").click(function(){$("#faq17body").slideToggle(250)}),$("#faq18header").click(function(){$("#faq18body").slideToggle(250)}),$("#faq19header").click(function(){$("#faq19body").slideToggle(250)}),$("#faq20header").click(function(){$("#faq20body").slideToggle(250)}),$("#faq21header").click(function(){$("#faq21body").slideToggle(250)}),$("#faq22header").click(function(){$("#faq22body").slideToggle(250)}),$("#faq23header").click(function(){$("#faq23body").slideToggle(250)}),$("#faq24header").click(function(){$("#faq24body").slideToggle(250)}),$("#faq25header").click(function(){$("#faq25body").slideToggle(250)}),$("#faq26header").click(function(){$("#faq26body").slideToggle(250)}),$("#faq27header").click(function(){$("#faq27body").slideToggle(250)}),$("#faq28header").click(function(){$("#faq28body").slideToggle(250)}),$("#faq29header").click(function(){$("#faq29body").slideToggle(250)}),$(".fullsize").click(function(){var e="<img src='"+$(this).attr("src")+"'/>",t=window.open("data:text/html,"+encodeURIComponent(e),"_blank");t.focus()}),$("#faq1header").click(function(){"none"==$("#angle1").css("transform")?$("#angle1").css("transform","rotate(90deg)"):$("#angle1").css("transform","")}),$("#faq2header").click(function(){"none"==$("#angle2").css("transform")?$("#angle2").css("transform","rotate(90deg)"):$("#angle2").css("transform","")}),$("#faq3header").click(function(){"none"==$("#angle3").css("transform")?$("#angle3").css("transform","rotate(90deg)"):$("#angle3").css("transform","")}),$("#faq4header").click(function(){"none"==$("#angle4").css("transform")?$("#angle4").css("transform","rotate(90deg)"):$("#angle4").css("transform","")}),$("#faq5header").click(function(){"none"==$("#angle5").css("transform")?$("#angle5").css("transform","rotate(90deg)"):$("#angle5").css("transform","")}),$("#faq6header").click(function(){"none"==$("#angle6").css("transform")?$("#angle6").css("transform","rotate(90deg)"):$("#angle6").css("transform","")}),$("#faq7header").click(function(){"none"==$("#angle7").css("transform")?$("#angle7").css("transform","rotate(90deg)"):$("#angle7").css("transform","")}),$("#faq8header").click(function(){"none"==$("#angle8").css("transform")?$("#angle8").css("transform","rotate(90deg)"):$("#angle8").css("transform","")}),$("#faq9header").click(function(){"none"==$("#angle9").css("transform")?$("#angle9").css("transform","rotate(90deg)"):$("#angle9").css("transform","")}),$("#faq10header").click(function(){"none"==$("#angle10").css("transform")?$("#angle10").css("transform","rotate(90deg)"):$("#angle10").css("transform","")}),$("#faq11header").click(function(){"none"==$("#angle11").css("transform")?$("#angle11").css("transform","rotate(90deg)"):$("#angle11").css("transform","")}),$("#faq12header").click(function(){"none"==$("#angle12").css("transform")?$("#angle12").css("transform","rotate(90deg)"):$("#angle12").css("transform","")}),$("#faq13header").click(function(){"none"==$("#angle13").css("transform")?$("#angle13").css("transform","rotate(90deg)"):$("#angle13").css("transform","")}),$("#faq14header").click(function(){"none"==$("#angle14").css("transform")?$("#angle14").css("transform","rotate(90deg)"):$("#angle14").css("transform","")}),$("#faq15header").click(function(){"none"==$("#angle15").css("transform")?$("#angle15").css("transform","rotate(90deg)"):$("#angle15").css("transform","")}),$("#faq16header").click(function(){"none"==$("#angle16").css("transform")?$("#angle16").css("transform","rotate(90deg)"):$("#angle16").css("transform","")}),$("#faq17header").click(function(){"none"==$("#angle17").css("transform")?$("#angle17").css("transform","rotate(90deg)"):$("#angle17").css("transform","")}),$("#faq18header").click(function(){"none"==$("#angle18").css("transform")?$("#angle18").css("transform","rotate(90deg)"):$("#angle18").css("transform","")}),$("#faq19header").click(function(){"none"==$("#angle19").css("transform")?$("#angle19").css("transform","rotate(90deg)"):$("#angle19").css("transform","")}),$("#faq20header").click(function(){"none"==$("#angle20").css("transform")?$("#angle20").css("transform","rotate(90deg)"):$("#angle20").css("transform","")}),$("#faq21header").click(function(){"none"==$("#angle21").css("transform")?$("#angle21").css("transform","rotate(90deg)"):$("#angle21").css("transform","")}),$("#faq22header").click(function(){"none"==$("#angle22").css("transform")?$("#angle22").css("transform","rotate(90deg)"):$("#angle22").css("transform","")}),$("#faq23header").click(function(){"none"==$("#angle23").css("transform")?$("#angle23").css("transform","rotate(90deg)"):$("#angle23").css("transform","")}),$("#faq24header").click(function(){"none"==$("#angle24").css("transform")?$("#angle24").css("transform","rotate(90deg)"):$("#angle24").css("transform","")}),$("#faq25header").click(function(){"none"==$("#angle25").css("transform")?$("#angle25").css("transform","rotate(90deg)"):$("#angle25").css("transform","")}),$("#faq26header").click(function(){"none"==$("#angle26").css("transform")?$("#angle26").css("transform","rotate(90deg)"):$("#angle26").css("transform","")}),$("#faq27header").click(function(){"none"==$("#angle27").css("transform")?$("#angle27").css("transform","rotate(90deg)"):$("#angle27").css("transform","")}),$("#faq28header").click(function(){"none"==$("#angle28").css("transform")?$("#angle28").css("transform","rotate(90deg)"):$("#angle28").css("transform","")}),$("#faq29header").click(function(){"none"==$("#angle29").css("transform")?$("#angle29").css("transform","rotate(90deg)"):$("#angle29").css("transform","")}),$("#cycle12input").click(function(){document.getElementById("selectedTrendImage").src="images/timeline/cycle-1-2.png",$("#siteInfoClose").click(),$("#networkInfoClose").click()}),$("#cycle13input").click(function(){document.getElementById("selectedTrendImage").src="images/timeline/cycle-1-3.png",$("#siteInfoClose").click(),$("#networkInfoClose").click()}),$("#cycle23input").click(function(){document.getElementById("selectedTrendImage").src="images/timeline/cycle-2-3.png",$("#siteInfoClose").click(),$("#networkInfoClose").click()}),$("#cycle123input").click(function(){document.getElementById("selectedTrendImage").src="images/timeline/cycle-full.png",$("#siteInfoClose").click(),$("#networkInfoClose").click()})}),require(["esri/dijit/Legend","esri/tasks/locator","esri/tasks/query","esri/tasks/QueryTask","esri/graphicsUtils","esri/geometry/Point","esri/geometry/Extent","esri/layers/ArcGISDynamicMapServiceLayer","esri/layers/FeatureLayer","esri/SpatialReference","esri/layers/WMSLayer","esri/layers/WMSLayerInfo","esri/layers/WebTiledLayer","dijit/form/CheckBox","dijit/form/RadioButton","dojo/query","dojo/dom","dojo/dom-class","dojo/dom-construct","dojo/dom-style","dojo/on"],function(e,t,a,i,o,r,l,s,c,d,g,p,u,f,m,h,y,b,v,w,k){function T(e,t,a,i,o,n,r){if(map.addLayer(a),C.push([o,camelize(i),a]),o){if(!$("#"+camelize(o)).length){var l;if("Data Source"==o)var l=$('<div id="'+camelize(o+" Root")+'" class="btn-group-vertical lyrTog" style="cursor: pointer;" data-toggle="buttons"> <button type="button" class="btn btn-default active" aria-pressed="true" style="font-weight: bold;text-align: left"><i class="glyphspan fa fa-check-square-o"></i>&nbsp;&nbsp;'+o+'<span id="info'+camelize(o)+'" title="Data Source identifies the scale, year and emulsion of the imagery that was used to map the wetlands and riparian areas for a given area. It also identifies areas that have Scalable data, which is an interim data product in areas of the nation where standard compliant wetland data is not yet available. Click for more info on Scalable data." class="glyphspan glyphicon glyphicon-question-sign pull-right"></span><span id="opacity'+camelize(o)+'" style="padding-right: 5px" class="glyphspan glyphicon glyphicon-adjust pull-right"></span></button> </div>');else var l=$('<div id="'+camelize(o+" Root")+'" class="btn-group-vertical lyrTog" style="cursor: pointer;" data-toggle="buttons"> <button type="button" class="btn btn-default active" aria-pressed="true" style="font-weight: bold;text-align: left"><i class="glyphspan fa fa-check-square-o"></i>&nbsp;&nbsp;'+o+"</button> </div>");l.click(function(e){l.find("i.glyphspan").toggleClass("fa-check-square-o fa-square-o"),$.each(C,function(e,t){var a=map.getLayer(t[2].id);if(t[0]==o)if($("#"+t[1]).find("i.glyphspan").hasClass("fa-dot-circle-o")&&l.find("i.glyphspan").hasClass("fa-check-square-o")){console.log("adding layer: ",t[1]),map.addLayer(t[2]);var a=map.getLayer(t[2].id);a.setVisibility(!0)}else if(l.find("i.glyphspan").hasClass("fa-square-o")){console.log("removing layer: ",t[1]);var a=map.getLayer(t[2].id);a.setVisibility(!1)}})});var s=$('<div id="'+camelize(o)+'" class="btn-group-vertical" data-toggle="buttons"></div>');$("#toggle").append(s),console.log("here")}if(a.visible)var c=$('<div id="'+camelize(i)+'" class="btn-group-vertical lyrTog radioTog" style="cursor: pointer;" data-toggle="buttons"> <label class="btn btn-default"  style="font-weight: bold;text-align: left"> <input type="radio" name="'+camelize(o)+'" autocomplete="off"><i class="glyphspan fa fa-dot-circle-o '+camelize(o)+'"></i>&nbsp;&nbsp;'+i+"</label> </div>");else var c=$('<div id="'+camelize(i)+'" class="btn-group-vertical lyrTog radioTog" style="cursor: pointer;" data-toggle="buttons"> <label class="btn btn-default"  style="font-weight: bold;text-align: left"> <input type="radio" name="'+camelize(o)+'" autocomplete="off"><i class="glyphspan fa fa-circle-o '+camelize(o)+'"></i>&nbsp;&nbsp;'+i+"</label> </div>");$("#"+camelize(o)).append(c),c.click(function(e){if($(this).find("i.glyphspan").hasClass("fa-circle-o")){$(this).find("i.glyphspan").toggleClass("fa-dot-circle-o fa-circle-o");var t=$(this)[0].id;$.each(C,function(e,a){if(a[0]==o)if(a[1]==t&&$("#"+camelize(o+" Root")).find("i.glyphspan").hasClass("fa-check-square-o")){console.log("adding layer: ",a[1]),map.addLayer(a[2]);var i=map.getLayer(a[2].id);i.setVisibility(!0)}else if(a[1]==t&&$("#"+camelize(o+" Root")).find("i.glyphspan").hasClass("fa-square-o"))console.log("group heading not checked");else{console.log("removing layer: ",a[1]);var i=map.getLayer(a[2].id);i.setVisibility(!1),$("#"+a[1]).find("i.glyphspan").hasClass("fa-dot-circle-o")&&$("#"+a[1]).find("i.glyphspan").toggleClass("fa-dot-circle-o fa-circle-o")}})}})}else if(r.includeInLayerList){if(a.visible&&void 0!==r.hasOpacitySlider&&1==r.hasOpacitySlider&&void 0!==r.moreinfo&&r.moreinfo)var c=$('<div class="btn-group-vertical lyrTog" style="cursor: pointer;" data-toggle="buttons"> <button type="button" class="btn btn-default" aria-pressed="true" style="font-weight: bold;text-align: left"><i class="glyphspan fa fa-check-square-o"></i>&nbsp;&nbsp;'+i+'<span id="info'+camelize(i)+'" title="more info" class="glyphspan glyphicon glyphicon-question-sign pull-right"></span><span id="opacity'+camelize(i)+'" style="padding-right: 5px" class="glyphspan glyphicon glyphicon-adjust pull-right"></span></button></div>');else if(!a.visible&&void 0!==r.hasOpacitySlider&&1==r.hasOpacitySlider&&void 0!==r.moreinfo&&r.moreinfo)var c=$('<div class="btn-group-vertical lyrTog" style="cursor: pointer;" data-toggle="buttons"> <button type="button" class="btn btn-default" aria-pressed="true" style="font-weight: bold;text-align: left"><i class="glyphspan fa fa-square-o"></i>&nbsp;&nbsp;'+i+'<span id="info'+camelize(i)+'" title="more info" class="glyphspan glyphicon glyphicon-question-sign pull-right"></span><span id="opacity'+camelize(i)+'" style="padding-right: 5px" class="glyphspan glyphicon glyphicon-adjust pull-right"></span></button></div>');else if(a.visible&&void 0!==r.hasOpacitySlider&&1==r.hasOpacitySlider)var c=$('<div class="btn-group-vertical lyrTog" style="cursor: pointer;" data-toggle="buttons"> <button type="button" class="btn btn-default" aria-pressed="true" style="font-weight: bold;text-align: left"><i class="glyphspan fa fa-check-square-o"></i>&nbsp;&nbsp;'+i+'<span id="info'+camelize(i)+'" title="more info" class="glyphspan glyphicon glyphicon-question-sign pull-right"></button></span></div>');else if(a.visible||void 0===r.hasOpacitySlider||1!=r.hasOpacitySlider)if(a.visible&&void 0!==r.moreinfo&&r.moreinfo)var c=$('<div class="btn-group-vertical lyrTog" style="cursor: pointer;" data-toggle="buttons"> <button type="button" class="btn btn-default" aria-pressed="true" style="font-weight: bold;text-align: left"><i class="glyphspan fa fa-check-square-o"></i>&nbsp;&nbsp;'+i+'<span id="opacity'+camelize(i)+'" class="glyphspan glyphicon glyphicon-adjust pull-right"></button></span></div>');else if(!a.visible&&void 0!==r.moreinfo&&r.moreinfo)var c=$('<div class="btn-group-vertical lyrTog" style="cursor: pointer;" data-toggle="buttons"> <button type="button" class="btn btn-default" aria-pressed="true" style="font-weight: bold;text-align: left"><i class="glyphspan fa fa-square-o"></i>&nbsp;&nbsp;'+i+'<span id="info'+camelize(i)+'" title="more info" class="glyphspan glyphicon glyphicon-question-sign pull-right"></button></span></div>');else if(a.visible)var c=$('<div class="btn-group-vertical lyrTog" style="cursor: pointer;" data-toggle="buttons"> <button type="button" class="btn btn-default active" aria-pressed="true" style="font-weight: bold;text-align: left"><i class="glyphspan fa fa-check-square-o"></i>&nbsp;&nbsp;'+i+"</button></span></div>");else var c=$('<div class="btn-group-vertical lyrTog" style="cursor: pointer;" data-toggle="buttons"> <button type="button" class="btn btn-default" aria-pressed="true" style="font-weight: bold;text-align: left"><i class="glyphspan fa fa-square-o"></i>&nbsp;&nbsp;'+i+"</button> </div>");else var c=$('<div class="btn-group-vertical lyrTog" style="cursor: pointer;" data-toggle="buttons"> <button type="button" class="btn btn-default active" aria-pressed="true" style="font-weight: bold;text-align: left"><i class="glyphspan fa fa-square-o"></i>&nbsp;&nbsp;'+i+'<span id="opacity'+camelize(i)+'" class="glyphspan glyphicon glyphicon-adjust pull-right"></button></span></div>');$("#infonetworkBoundaries").prop("title","A network is a set of 20 to 30 wells selected to represent water-quality conditions in a given geographical area, aquifer, and in some cases, a specific land use. A network resampled at approximately 10-year intervals is a decadal trend network"),$("#infomagnitudeOfChange").prop("title","Click on network arrow or dot for more information"),c.click(function(e){$(this).find("i.glyphspan").toggleClass("fa-check-square-o fa-square-o"),$(this).find("button").button("toggle"),a.visible?(a.setVisibility(!1),"networkLocations"==a.id&&$("#constitExp").css("visibility","hidden"),"networkBoundaries"==a.id&&$("#networkExpl").css("visibility","hidden")):("networkLocations"==a.id&&(a.setVisibility(!0),$("#constitExp").css("visibility","visible")),"networkBoundaries"==a.id&&(a.setVisibility(!0),$("#networkExpl").css("visibility","visible")),a.setVisibility(!0)),r.otherLayersToggled&&$.each(r.otherLayersToggled,function(e,t){var i=map.getLayer(t);i.setVisibility(a.visible)})})}if(void 0!==t){var d=camelize(e);if(!$("#"+d).length){if(t)var g=$('<div id="'+d+'"><div class="alert alert-info" role="alert"><strong>'+e+"</strong></div></div>");else var g=$('<div id="'+d+'"></div>');$("#toggle").append(g)}if(o){if($("#"+d).append(l),$("#"+d).append(s),void 0!==r.moreinfo&&r.moreinfo){var p="#info"+camelize(o),u=$(p);u.click(function(e){window.open(r.moreinfo,"_blank"),e.preventDefault(),e.stopPropagation()})}if($("#opacity"+camelize(o)).length>0){var p="#opacity"+camelize(o),f=$(p);f.click(function(e){e.preventDefault(),e.stopPropagation(),$(".opacitySlider").remove();var t=map.getLayer(n.id).opacity,a=$('<div class="opacitySlider"><label id="opacityValue">Opacity: '+t+'</label><label class="opacityClose pull-right">X</label><input id="slider" type="range"></div>');$("body").append(a),$("#slider")[0].value=100*t,$(".opacitySlider").css("left",event.clientX-180),$(".opacitySlider").css("top",event.clientY-50),$(".opacitySlider").mouseleave(function(){$(".opacitySlider").remove()}),$(".opacityClose").click(function(){$(".opacitySlider").remove()}),$("#slider").change(function(e){var t=$("#slider")[0].value/100;console.log("o: "+t),$("#opacityValue").html("Opacity: "+t),map.getLayer(n.id).setOpacity(t),r.otherLayersToggled&&$.each(r.otherLayersToggled,function(e,a){var i=map.getLayer(a);i.setOpacity(t)})})})}}else{if($("#"+d).append(c),void 0!==r.moreinfo&&r.moreinfo){var p="#info"+camelize(i),u=$(p);u.click(function(e){window.open(r.moreinfo,"_blank"),e.preventDefault(),e.stopPropagation()})}$("#opacity"+camelize(i)).length>0&&$("#opacity"+camelize(i)).click(function(e){e.preventDefault(),e.stopPropagation(),$(".opacitySlider").remove();var t=map.getLayer(n.id).opacity,a=$('<div class="opacitySlider"><label id="opacityValue">Opacity: '+t+'</label><label class="opacityClose pull-right">X</label><input id="slider" type="range"></div>');$("body").append(a),$("#slider")[0].value=100*t,$(".opacitySlider").css("left",event.clientX-180),$(".opacitySlider").css("top",event.clientY-50),$(".opacitySlider").mouseleave(function(){$(".opacitySlider").remove()}),$(".opacityClose").click(function(){$(".opacitySlider").remove()}),$("#slider").change(function(e){var t=$("#slider")[0].value/100;console.log("o: "+t),$("#opacityValue").html("Opacity: "+t),map.getLayer(n.id).setOpacity(t),r.otherLayersToggled&&$.each(r.otherLayersToggled,function(e,a){var i=map.getLayer(a);i.setOpacity(t)})})})}}else if($("#toggle").append(c),void 0!==r.moreinfo&&r.moreinfo){var p="#info"+camelize(i),u=$(p);u.click(function(e){alert(e.currentTarget.id),e.preventDefault(),e.stopPropagation()})}}var S=[],C=[];$.each(allLayers,function(e,t){console.log("processing: ",t.groupHeading),$.each(t.layers,function(e,a){var i=e;("pest layer"==i||"Eco Sites layer"==i||"WRTDS Concentration Sites"==i||"WRTDS Flux Sites"==i)&&(i="Trend results");var o="";if(a.wimOptions.exclusiveGroupName&&(o=a.wimOptions.exclusiveGroupName),"agisFeature"===a.wimOptions.layerType){var r=new c(a.url,a.options);void 0!==a.wimOptions.renderer&&r.setRenderer(a.wimOptions.renderer),a.wimOptions&&1==a.wimOptions.includeLegend&&S.push({layer:r,title:i}),T(t.groupHeading,t.showGroupHeading,r,e,o,a.options,a.wimOptions)}else if("agisWMS"===a.wimOptions.layerType){var r=new g(a.url,{resourceInfo:a.options.resourceInfo,visibleLayers:a.options.visibleLayers},a.options);a.wimOptions&&1==a.wimOptions.includeLegend&&S.push({layer:r,title:i}),T(t.groupHeading,t.showGroupHeading,r,e,o,a.options,a.wimOptions)}else if("webTiledLayer"===a.wimOptions.layerType){var r=new u(a.url,a.options);a.wimOptions&&1==a.wimOptions.includeLegend&&S.push({layer:r,title:i}),T(t.groupHeading,t.showGroupHeading,r,e,o,a.options,a.wimOptions)}else if("agisDynamic"===a.wimOptions.layerType){var r=new s(a.url,a.options);if(a.visibleLayers&&r.setVisibleLayers(a.visibleLayers),a.wimOptions&&a.wimOptions.layerDefinitions){var l=[];$.each(a.wimOptions.layerDefinitions,function(e,t){l[e]=t}),r.setLayerDefinitions(l)}a.wimOptions&&1==a.wimOptions.includeLegend&&S.push({layer:r,title:i}),T(t.groupHeading,t.showGroupHeading,r,e,o,a.options,a.wimOptions)}else if("agisImage"===a.wimOptions.layerType){var r=new n(a.url,a.options);a.wimOptions&&1==a.wimOptions.includeLegend&&S.push({layer:r,title:i}),a.visibleLayers&&r.setVisibleLayers(a.visibleLayers),T(t.groupHeading,t.showGroupHeading,r,e,o,a.options,a.wimOptions)}})}),legend=new e({map:map,layerInfos:S},"legendDiv"),legend.startup()})}),$(document).ready(function(){});